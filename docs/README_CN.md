<div align="center">

# GPUFabric

**AI æ¨ç†åˆ†å‘ç½‘ç»œ**

*é¦–ä¸ª AI åŸç”Ÿçš„æ¨¡å‹æ¨ç† CDN - å®‰å…¨ã€å¿«é€Ÿã€æ˜“éƒ¨ç½²*

[English](../README.md) Â· [ç®€ä½“ä¸­æ–‡](README_CN.md)

[![Rust](https://img.shields.io/badge/rust-stable-brightgreen.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-BSD--3--Clause-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-Linux%20%7C%20macOS%20%7C%20Windows-lightgrey)]()

</div>

---

ä¸€ä¸ªåˆ†å¸ƒå¼ AI æ¨ç†åˆ†å‘ç½‘ç»œï¼Œå°†æ‚¨çš„æ¨¡å‹æ›´é è¿‘ç”¨æˆ·ã€‚å°±åƒ AI æ¨ç†çš„ CDNï¼ŒGPUFabric æ™ºèƒ½åœ°åœ¨åˆ†å¸ƒå¼æ¨¡å‹å®ä¾‹ä¹‹é—´è·¯ç”±è¯·æ±‚ï¼Œæä¾›ä½å»¶è¿Ÿã€é«˜å¯ç”¨çš„ AI æœåŠ¡ï¼ŒåŒæ—¶ä¿æŒæ¨¡å‹åœ¨æ‚¨è‡ªå·±çš„åŸºç¡€è®¾æ–½ä¸Šç§æœ‰å’Œå®‰å…¨ã€‚


## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **åˆ†å¸ƒå¼æ¨ç†æ¶æ„**ï¼šåƒ CDN ä¸€æ ·æ™ºèƒ½è·¯ç”±ï¼Œé™ä½å»¶è¿Ÿã€æå‡å¯ç”¨æ€§
- **æ¨¡å‹éšç§ä¸å®‰å…¨**ï¼šæ¨¡å‹ä¸æ•°æ®ç•™åœ¨ä½ çš„åŸºç¡€è®¾æ–½å†…ï¼ŒTLS 1.3 å…¨é“¾è·¯åŠ å¯†
- **æ˜“ç”¨éƒ¨ç½²**ï¼šä¸€æ¡å‘½ä»¤ `docker compose up -d` å³å¯å¯åŠ¨å®Œæ•´æœåŠ¡
- **å¯è§‚æµ‹æ€§**ï¼šç³»ç»Ÿ/ç½‘ç»œ/å¿ƒè·³æŒ‡æ ‡ï¼ŒAPI æš´éœ²ç›‘æ§ç«¯ç‚¹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Rust**ï¼ˆç¨³å®šç‰ˆï¼‰- [å®‰è£… Rust](https://www.rust-lang.org/tools/install)
- **PostgreSQL** - æ•°æ®åº“æœåŠ¡å™¨
- **Redis**ï¼ˆå¯é€‰ï¼‰- æ€§èƒ½ç¼“å­˜æœåŠ¡
- **Kafka**ï¼ˆå¯é€‰ï¼‰- ç”¨äºå¿ƒè·³å¤„ç†çš„æ¶ˆæ¯é˜Ÿåˆ—

### å®‰è£…

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/nexus-gpu/GPUFabric.git
cd GPUFabric
```

#### 2. æ„å»ºé¡¹ç›®

```bash
# æ„å»ºæ‰€æœ‰ç»„ä»¶
cargo build --release

# æ„å»ºç‰¹å®šäºŒè¿›åˆ¶
cargo build --release --bin gpuf-s
cargo build --release --bin gpuf-c
```

#### 3. è®¾ç½®æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“
createdb GPUFabric

# åˆå§‹åŒ–æ•°æ®åº“æ¶æ„
psql -U postgres -d GPUFabric -f scripts/db.sql
```

#### 4. ç”Ÿæˆ TLS è¯ä¹¦

```bash
# ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
./scripts/create_cert.sh

# è¿™ä¼šåˆ›å»ºï¼š
# - cert.pemï¼ˆè¯ä¹¦é“¾ï¼‰
# - key.pemï¼ˆç§é’¥ï¼‰
```

#### 5. Start Services

**å¯åŠ¨ Redisï¼ˆå¯é€‰ï¼‰ï¼š**
```bash
redis-server
# æˆ–ä½¿ç”¨ Docker å¯åŠ¨
docker run -d -p 6379:6379 redis:alpine
```

**å¯åŠ¨ Kafkaï¼ˆå¯é€‰ï¼‰ï¼š**
```bash
docker compose -f kafka_compose.yaml up -d

# åˆ›å»ºå¿…éœ€çš„ä¸»é¢˜
docker exec -it <kafka-container> kafka-topics --create \
  --topic client-heartbeats \
  --bootstrap-server localhost:9092 \
  --partitions 1 \
  --replication-factor 1
```

## ğŸ’» å¿«é€Ÿå¼€å§‹ï¼ˆæç®€ï¼‰

```bash
# 1) å…‹éš†
git clone https://github.com/nexus-gpu/GPUFabric.git
cd GPUFabric

# 2) ç”Ÿæˆ TLS è¯ä¹¦ï¼ˆcert.pem/key.pem ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆï¼‰
./scripts/create_cert.sh

# 3) ä¸€é”®å¯åŠ¨ï¼ˆPostgres/Redis/Kafka/gpuf-s/api-server/heartbeat-consumerï¼‰
docker compose -f docker/gpuf_s_compose.yaml up -d

# 4) éªŒè¯æœåŠ¡
curl -H "Authorization: Bearer your-api-key" http://localhost:18080
```

æ›´å¤šä½¿ç”¨ç¤ºä¾‹ï¼ˆgpuf-s å‚æ•°ã€gpuf-c å¯åŠ¨ã€Docker æ„å»ºç­‰ï¼‰ï¼Œè¯·è§ä¸‹æ–¹æ–‡æ¡£ç´¢å¼•ã€‚

### å¯åŠ¨æœåŠ¡ç«¯ï¼ˆgpuf-sï¼‰

è¯¦è§ [gpuf-s æ–‡æ¡£](./gpuf-s.md)

```bash
cargo run --release --bin gpuf-s -- \
  --control-port 17000 \
  --proxy-port 17001 \
  --public-port 18080 \
  --api-port 18081 \
  --database-url "postgres://postgres:password@localhost:5432/GPUFabric" \
  --redis-url "redis://127.0.0.1:6379" \
  --bootstrap-server "localhost:9092" \
  --api-key "your-secure-api-key" \
  --proxy-cert-chain-path "cert.pem" \
  --proxy-private-key-path "key.pem"
```

### å¯åŠ¨å®¢æˆ·ç«¯ï¼ˆgpuf-cï¼‰

è¯¦è§ [gpuf-c æ–‡æ¡£](./gpuf-c.md)

```bash
cargo run --release --bin gpuf-c -- \
  --client-id client_A \
  --server-addr 192.168.1.100 \
  --local-addr 127.0.0.1 \
  --local-port 11434
```

## ğŸ“š æ–‡æ¡£ç´¢å¼•
- **[gpuf-s æ–‡æ¡£](./gpuf-s.md)** - æœåŠ¡å™¨ç»„ä»¶æ–‡æ¡£
- **[gpuf-c æ–‡æ¡£](./gpuf-c.md)** - å®¢æˆ·ç«¯ç»„ä»¶æ–‡æ¡£
- **[API Server æ–‡æ¡£](./api_server.md)** - RESTful API å‚è€ƒ
- **[Heartbeat Consumer æ–‡æ¡£](./heartbeat_consumer.md)** - Kafka æ¶ˆè´¹è€…æ–‡æ¡£
- **[XDP æ–‡æ¡£](./xdp.md)** - å†…æ ¸çº§æ•°æ®åŒ…è¿‡æ»¤


### Docker æ„å»º

#### æ„å»º gpuf-s é•œåƒ
```bash
docker build -f docker/Dockerfile.runtime -t GPUFabric/gpuf-s:latest --build-arg BIN=gpuf-s .
```

#### æ„å»º api_server é•œåƒ
```bash
docker build -f docker/Dockerfile.runtime -t GPUFabric/api_server:latest --build-arg BIN=api_server .
```

#### æ„å»º heartbeat_consumer é•œåƒ
```bash
docker build -f docker/Dockerfile.runtime -t GPUFabric/heartbeat_consumer:latest --build-arg BIN=heartbeat_consumer .
```

<!-- ä¸€é”® compose ç¤ºä¾‹å·²åœ¨â€œå¿«é€Ÿå¼€å§‹ï¼ˆæç®€ï¼‰â€æä¾› -->
```bash
docker compose -f docker/gpuf_s_compose.yaml up -d
```

<!-- Heartbeat Consumer å¯åŠ¨ç¤ºä¾‹ç§»è‡³æ–‡æ¡£ç´¢å¼•å¯¹åº”é¡µé¢ -->

```bash
cargo run --release --bin heartbeat_consumer -- \
  --database-url "postgres://postgres:password@localhost:5432/GPUFabric" \
  --bootstrap-server "localhost:9092" \
  --batch-size 100 \
  --batch-timeout 5
```

<!-- æµ‹è¯•ç¤ºä¾‹ç§»è‡³å„æœåŠ¡æ–‡æ¡£é¡µé¢ -->

```bash
# ä½¿ç”¨ API Key æµ‹è¯•
curl -H "Authorization: Bearer your-api-key" http://localhost:18080

# æµ‹è¯• Ollama é›†æˆ
curl -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json" \
  http://localhost:18080/v1/chat/completions \
  -d '{
    "model": "llama2",
    "messages": [{"role": "user", "content": "Hello!"}]
  }'
```


## ğŸ› ï¸ é…ç½®

### æœåŠ¡å™¨é…ç½®
è¯¦è§ [gpuf-s æ–‡æ¡£](./gpuf-s.md)

gpuf-s æ”¯æŒé€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œå®Œæ•´é…ç½®ï¼š

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `--control-port` | u16 | 17000 | å®¢æˆ·ç«¯æ§åˆ¶è¿æ¥ç«¯å£ |
| `--proxy-port` | u16 | 17001 | å®¢æˆ·ç«¯ä»£ç†è¿æ¥ç«¯å£ |
| `--public-port` | u16 | 18080 | é¢å‘å¤–éƒ¨ç”¨æˆ·çš„è®¿é—®ç«¯å£ |
| `--api-port` | u16 | 18081 | HTTP API ç«¯å£ |
| `--database-url` | string | `postgres://...` | PostgreSQL è¿æ¥ä¸² |
| `--redis-url` | string | `redis://127.0.0.1:6379` | Redis è¿æ¥ä¸² |
| `--bootstrap-server` | string | `localhost:9092` | Kafka Broker åœ°å€ |
| `--api-key` | string | `abc123` | å…œåº• API Key |
| `--proxy-cert-chain-path` | string | `cert.pem` | TLS è¯ä¹¦é“¾è·¯å¾„ |
| `--proxy-private-key-path` | string | `key.pem` | TLS ç§é’¥è·¯å¾„ |

### Environment Variables

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼š

```bash
export DATABASE_URL="postgres://postgres:password@localhost:5432/GPUFabric"
export REDIS_URL="redis://localhost:6379"
export API_KEY="your-api-key"
export RUST_LOG="gpuf-s=info"
```

## ğŸ”§ å¼€å‘

### å¼€å‘å·¥ä½œæµ

```bash
# è¿è¡Œæµ‹è¯•
cargo test

# å¸¦æ—¥å¿—è¿è¡Œ
RUST_LOG=debug cargo run --release --bin gpuf-s

# æ ¼å¼åŒ–ä»£ç 
cargo fmt

# è¿è¡Œ Linter
cargo clippy
```

### é¡¹ç›®ç»“æ„
è¯¦è§æ ¹ç›®å½• [README_CN.md](../README_CN.md)

```
GPUFabric/
â”œâ”€â”€ gpuf-s/              # æœåŠ¡å™¨ç»„ä»¶
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.rs            # æœåŠ¡å™¨å…¥å£
â”‚       â”œâ”€â”€ handle/            # è¿æ¥å¤„ç†å™¨
â”‚       â”œâ”€â”€ api_server/        # REST API æœåŠ¡
â”‚       â”œâ”€â”€ consumer/           # Kafka æ¶ˆè´¹è€…
â”‚       â”œâ”€â”€ db/                 # æ•°æ®åº“æ“ä½œ
â”‚       â””â”€â”€ util/               # å®ç”¨å·¥å…·
â”œâ”€â”€ gpuf-c/              # å®¢æˆ·ç«¯ç»„ä»¶
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.rs            # å®¢æˆ·ç«¯å…¥å£
â”‚       â”œâ”€â”€ handle/            # è¿æ¥å¤„ç†å™¨
â”‚       â”œâ”€â”€ llm_engine/        # LLM å¼•æ“é›†æˆ
â”‚       â””â”€â”€ util/               # å®ç”¨å·¥å…·
â”œâ”€â”€ common/            # å…±äº«åè®®åº“
â”‚   â””â”€â”€ src/lib.rs     # åè®®å®šä¹‰
â””â”€â”€ docs/              # æ–‡æ¡£
```


## ğŸ¯ è¯¦ç»†èƒ½åŠ›

### ğŸŒ AI æ¨ç†åˆ†å‘ç½‘ç»œ
- **åˆ†å¸ƒå¼æ¨ç†æ¶æ„**ï¼šåƒ CDN ä¸€æ ·æ™ºèƒ½è·¯ç”±ï¼Œè¯·æ±‚æŒ‰å°±è¿‘ã€è´Ÿè½½ä¸å¥åº·åº¦åˆ†å‘
- **åœ°ç†åˆ†å¸ƒ**ï¼šè®©æ¨ç†æ›´é è¿‘ç”¨æˆ·ï¼Œæ˜¾è‘—é™ä½è·¨åŒºç½‘ç»œæ—¶å»¶
- **æ™ºèƒ½è°ƒåº¦**ï¼šå¯¹å¤šå®ä¾‹è‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼Œæ”¯æŒå¥åº·æ£€æŸ¥ä¸æƒé‡è°ƒæ•´
- **è¾¹ç¼˜ä¾§æ”¯æŒ**ï¼šè¾¹ç¼˜èŠ‚ç‚¹å°±åœ°æ¨ç†ï¼Œå‡å°‘æ•°æ®å›ä¼ ã€ç¼©çŸ­å“åº”é“¾è·¯
- **å¼¹æ€§ä¼¸ç¼©**ï¼šæŒ‰éœ€æ¨ªå‘æ‰©å®¹/ç¼©å®¹ï¼Œä¸ä¸­æ–­æœåŠ¡
- **å¥åº·æ²»ç†**ï¼šå®ä¾‹å¼‚å¸¸è‡ªåŠ¨æ‘˜é™¤å¹¶å›æµæµé‡ï¼Œå¿«é€Ÿæ•…éšœè½¬ç§»

### ğŸ” æ¨¡å‹éšç§ä¸å®‰å…¨
- **æœ¬åœ°æ¨¡å‹æ‰˜ç®¡**ï¼šæ¨¡å‹ç•™å­˜åœ¨è‡ªæœ‰åŸºç¡€è®¾æ–½ï¼Œèµ„äº§ä¸æƒé™å®Œå…¨å¯æ§
- **æ•°æ®éšç§ä¿æŠ¤**ï¼šè¯·æ±‚ä¸ç»“æœä¸ç»ç¬¬ä¸‰æ–¹ï¼Œä¸­ç«¯åˆ°ç«¯åŠ å¯†ä¼ è¾“
- **TLS 1.3**ï¼šé‡‡ç”¨ä¼ä¸šçº§åŠ å¯†æ ‡å‡†ï¼Œä¼ è¾“å®‰å…¨æœ‰ä¿éšœ
- **å¤šé‡è®¤è¯**ï¼šæ•°æ®åº“è®¤è¯ + Redis ç¼“å­˜æ ¡éªŒ + API Key å…œåº•
- **å†…æ ¸çº§é˜²æŠ¤**ï¼šåŸºäº XDP/eBPF çš„åŒ…çº§è¿‡æ»¤ä¸é™æµï¼Œç¼“è§£ DDoS

### âš¡ å¿«é€Ÿè®¿é—®ï¼ˆNAT ç©¿é€ï¼‰
- **NAT ç©¿é€**ï¼šæ— éœ€å…¬ç½‘ IPï¼Œå†…ç½‘æœåŠ¡å¯å®‰å…¨æš´éœ²ä¸è®¿é—®
- **P2P ç›´è¿**ï¼ˆè§„åˆ’ä¸­ï¼‰ï¼šä¼˜å…ˆç‚¹å¯¹ç‚¹å»ºç«‹é“¾è·¯ï¼Œè¿›ä¸€æ­¥é™ä½æ—¶å»¶
- **äºšæ¯«ç§’è·¯ç”±**ï¼šRust + Tokio æ¶æ„ï¼Œæè‡´ä½æ—¶å»¶è°ƒåº¦
- **ç¼“å­˜åŠ é€Ÿ**ï¼šRedis å‘½ä¸­ç‡é«˜ï¼Œé™ä½æ•°æ®åº“å‹åŠ›ã€æå‡å“åº”é€Ÿåº¦
- **è¿æ¥æ± åŒ–**ï¼šé•¿è¿æ¥å¤ç”¨ï¼Œå‡å°‘æ¡æ‰‹ä¸é‡å»ºå¼€é”€

### ğŸš€ æ˜“äºéƒ¨ç½²
- **ä¸€é”®éƒ¨ç½²**ï¼š`docker compose up -d` å¯åŠ¨å®Œæ•´æœåŠ¡æ ˆ
- **é¢„æ„å»ºé•œåƒ**ï¼šå†…ç½® gpuf-sã€api_serverã€heartbeat_consumer é•œåƒ
- **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šä¸€é”®ç”Ÿæˆ TLS è¯ä¹¦ä¸åˆå§‹åŒ–æ•°æ®åº“
- **é›¶é…ç½®å³ç”¨**ï¼šé»˜è®¤å‚æ•°å¯å¼€ç®±å³ç”¨ï¼Œå¯æŒ‰éœ€è¦†ç›–
- **çµæ´»é…ç½®**ï¼šæ”¯æŒå‘½ä»¤è¡Œã€ç¯å¢ƒå˜é‡ä¸é…ç½®æ–‡ä»¶å¤šç§æ–¹å¼

### ğŸŒ è·¨å¹³å°æ”¯æŒ
- **å¤šå¹³å°å…¼å®¹**ï¼šåŸç”Ÿæ”¯æŒ Linuxã€macOSã€Windows
- **ç»Ÿä¸€å‘å¸ƒ**ï¼šå•ä¸€äºŒè¿›åˆ¶ï¼Œæ— é¢å¤–å¤æ‚ä¾èµ–
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDocker é•œåƒè¦†ç›–ä¸»æµè¿è¡Œç¯å¢ƒ
- **ARM64 å‹å¥½**ï¼šå…¼å®¹ Apple Siliconï¼ˆM1/M2/M3ï¼‰ä¸ ARM æœåŠ¡å™¨

## ğŸ—ï¸ æ¶æ„

![GPUFabric System Architecture](./svg/GPUFabric.svg)

### ç³»ç»Ÿç»„ä»¶

GPUFabric åŒ…å«ä¸‰ä¸ªä¸»è¦ç»„ä»¶ï¼š

- **gpuf-s** â€”â€” æœåŠ¡å™¨ç¨‹åºï¼Œè´Ÿè´£è´Ÿè½½å‡è¡¡ã€å®¢æˆ·ç«¯ç®¡ç†ä¸è¯·æ±‚è·¯ç”±
- **gpuf-c** â€”â€” å®¢æˆ·ç«¯ç¨‹åºï¼Œè¿æ¥æœåŠ¡å™¨å¹¶è½¬å‘åˆ°æœ¬åœ°æœåŠ¡
- **common** â€”â€” å…±äº«åè®®åº“ï¼Œå®šä¹‰äºŒè¿›åˆ¶å‘½ä»¤ä¸æ•°æ®ç»“æ„

### å››ç«¯å£è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      gpuf-s Server                         â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Control     â”‚  â”‚ Proxy       â”‚  â”‚ Public      â”‚     â”‚
â”‚  â”‚ Port 17000  â”‚  â”‚ Port 17001  â”‚  â”‚ Port 18080  â”‚     â”‚
â”‚  â”‚ (Registration)â”‚  â”‚ (Data       â”‚  â”‚ (External   â”‚     â”‚
â”‚  â”‚             â”‚  â”‚ Forwarding) â”‚  â”‚ Users)      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ API Server  â”‚  â”‚ PostgreSQL  â”‚  â”‚ Redis Cache â”‚     â”‚
â”‚  â”‚ Port 18081  â”‚  â”‚ Database    â”‚  â”‚             â”‚     â”‚
â”‚  â”‚ (REST API)  â”‚  â”‚             â”‚  â”‚             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚ Kafka       â”‚                                         â”‚
â”‚  â”‚ (Message    â”‚                                         â”‚
â”‚  â”‚ Queue)      â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ç«¯å£ | ç”¨é€” | åè®® | æè¿° |
|------|------|------|------|
| **17000** | æ§åˆ¶ | TCP | å®¢æˆ·ç«¯æ³¨å†Œä¸æŒ‡ä»¤ä¸‹å‘çš„æŒä¹…è¿æ¥ |
| **17001** | ä»£ç† | TCP | åŒå‘æ•°æ®è½¬å‘çš„ä¸´æ—¶è¿æ¥ |
| **18080** | å…¬å…± | TCP/HTTP | å¤–éƒ¨ç”¨æˆ·å…¥å£ï¼Œå¸¦ API Key æ ¡éªŒ |
| **18081** | API | HTTP | ç›‘æ§ä¸ç®¡ç†ç”¨çš„ RESTful API æœåŠ¡ |

### è¯·æ±‚æµç¨‹

```
1. ç”¨æˆ·è¿æ¥åˆ°å…¬å…±ç«¯å£ï¼ˆ18080ï¼‰
   â†“
2. gpuf-s æ ¡éªŒ API Keyï¼ˆæ•°æ®åº“æ ¡éªŒæˆ–é™æ€å…œåº•ï¼‰
   â†“
3. gpuf-s ä»æ´»è·ƒå®¢æˆ·ç«¯æ± ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå®¢æˆ·ç«¯
   â†“
4. gpuf-s ç”Ÿæˆå”¯ä¸€çš„ proxy_conn_id
   â†“
5. gpuf-s å‘é€‰å®šå®¢æˆ·ç«¯å‘é€ RequestNewProxyConn
   â†“
6. gpuf-c ä½¿ç”¨ NewProxyConn è¿æ¥ä»£ç†ç«¯å£ï¼ˆ17001ï¼‰
   â†“
7. gpuf-c è¿æ¥æœ¬åœ°å®é™…æœåŠ¡
   â†“
8. gpuf-s åŸºäº proxy_conn_id åŒ¹é…ä¸¤ç«¯è¿æ¥
   â†“
9. å¼€å§‹åŒå‘æ•°æ®è½¬å‘

## ğŸ”¬ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **è¯­è¨€**ï¼šRustï¼ˆç¨³å®šç‰ˆï¼‰+ Tokio å¼‚æ­¥è¿è¡Œæ—¶
- **ç½‘ç»œ**ï¼šTLS 1.3ï¼ŒTCP/HTTP åè®®
- **åºåˆ—åŒ–**ï¼šBincode é«˜æ•ˆäºŒè¿›åˆ¶åè®®

### åŸºç¡€è®¾æ–½ç»„ä»¶
- **æ•°æ®åº“**ï¼šPostgreSQL â€”â€” æŒä¹…åŒ–å­˜å‚¨ã€è®¤è¯ä¸ç»Ÿè®¡
- **ç¼“å­˜**ï¼šRedis â€”â€” 5 åˆ†é’Ÿ TTL ç¼“å­˜ï¼Œé™ä½ ~90% æ•°æ®åº“è´Ÿè½½
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šApache Kafka â€”â€” å¼‚æ­¥å¿ƒè·³å¤„ç†ä¸è¯·æ±‚è·Ÿè¸ª
- **å®¹å™¨åŒ–**ï¼šDocker & Docker Compose â€”â€” éƒ¨ç½²ä¸è¿ç»´

### é«˜æ€§èƒ½ç‰¹æ€§

#### XDP (eXpress Data Path) - å†…æ ¸çº§æ•°æ®åŒ…è¿‡æ»¤
- **åŸºäº eBPF** çš„ç½‘ç»œé©±åŠ¨å±‚æ•°æ®åŒ…å¤„ç†ï¼Œè¶…ä½å»¶è¿Ÿ
- **å†…æ ¸çº§ API Key æ ¡éªŒ**ï¼Œåœ¨åˆ°è¾¾ç”¨æˆ·ç©ºé—´å‰å®ŒæˆéªŒè¯
- **ä½¿ç”¨åœºæ™¯**ï¼šé«˜æ€§èƒ½è¯·æ±‚éªŒè¯ä¸ DDoS é˜²æŠ¤

è¯¦ç»† XDP è®¾ç½®ä¸ä½¿ç”¨ï¼Œè¯·å‚è§ [XDP æ–‡æ¡£](./xdp.md)

### ç›‘æ§ä¸å¯è§‚æµ‹æ€§
- **ç³»ç»ŸæŒ‡æ ‡**ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç›‘æ§
- **èƒ½è€—æŒ‡æ ‡**ï¼šGPU/CPU/ANE åŠŸè€—ï¼ˆmacOS M ç³»åˆ—ï¼‰
- **ç½‘ç»œç»Ÿè®¡**ï¼šå¸¦ä¼šè¯è¿½è¸ªçš„å®æ—¶å¸¦å®½ç›‘æ§
- **RESTful API**ï¼šå¯¹å¤–æš´éœ²çš„æŒ‡æ ‡æŸ¥è¯¢æ¥å£

## ğŸ—ºï¸ è·¯çº¿å›¾

### âœ… å½“å‰åŠŸèƒ½ï¼ˆç”Ÿäº§å¯ç”¨ï¼‰
- âœ… é«˜æ€§èƒ½åå‘ä»£ç†ä¸è´Ÿè½½å‡è¡¡
- âœ… åŸºäºæ•°æ®åº“çš„è®¤è¯ï¼ˆé…åˆ Redis ç¼“å­˜ï¼‰
- âœ… åŸºäº Kafka çš„å¼‚æ­¥å¿ƒè·³å¤„ç†
- âœ… TLS 1.3 å®‰å…¨è¿æ¥
- âœ… AI/LLM æ¨¡å‹è·¯ç”±ï¼ˆOllamaã€vLLMï¼‰
- âœ… å®æ—¶ç³»ç»Ÿç›‘æ§ä¸æŒ‡æ ‡
- âœ… XDP å†…æ ¸çº§æ•°æ®åŒ…è¿‡æ»¤ï¼ˆLinuxï¼‰

### ğŸš§ å¼€å‘ä¸­

#### P2P æ··åˆæ¶æ„
ä»çº¯ç²¹çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼è¿ç§»åˆ°æ··åˆ P2P æ¶æ„ï¼Œä»¥æå‡æ€§èƒ½å¹¶é™ä½æœåŠ¡å™¨å¸¦å®½å¼€é”€ã€‚

**æŠ€æœ¯å®ç°ï¼š**
- **NAT ç©¿é€**ï¼šä½¿ç”¨ STUN/TURN/ICE åè®®è¿›è¡Œå¯¹ç­‰å‘ç°
- **libp2p é›†æˆ**ï¼šRust åŸç”Ÿ P2P ç½‘ç»œåº“
  - AutoNAT è‡ªåŠ¨è¯†åˆ« NAT ç±»å‹
  - Relay åè®®ç”¨äºä¸­ç»§å›é€€
  - Hole Punching è¿›è¡Œæ‰“æ´ç›´è¿
  - DHTï¼ˆåˆ†å¸ƒå¼å“ˆå¸Œè¡¨ï¼‰ç”¨äºå¯¹ç­‰å‘ç°
- **ä¿¡ä»¤æœåŠ¡å™¨**ï¼šç”± gpuf-s å……å½“å¯¹ç­‰è¿æ¥å»ºç«‹çš„ä¿¡ä»¤æœåŠ¡å™¨
- **æ™ºèƒ½è·¯ç”±**ï¼šä¾æ®ç½‘ç»œæ¡ä»¶åœ¨ç›´è¿/ä¸­ç»§/TURN ä¹‹é—´è‡ªåŠ¨é€‰æ‹©

**Protocol Design** (CommandV2):
```rust
// Already implemented in common/src/lib.rs
CommandV2::P2PConnectionRequest      // Initiate P2P handshake
CommandV2::P2PConnectionInfo         // Exchange peer addresses
CommandV2::P2PConnectionEstablished  // Confirm connection type
CommandV2::P2PConnectionFailed       // Fallback to relay mode
```

**æ”¶ç›Šï¼š**
- ğŸš€ ç›´è¿æ˜¾è‘—é™ä½ç«¯åˆ°ç«¯æ—¶å»¶
- ğŸ’° é™ä½æœåŠ¡å™¨å¸¦å®½æˆæœ¬
- ğŸ“ˆ å¤§è§„æ¨¡éƒ¨ç½²å¯æ‰©å±•æ€§æ›´å¥½
- ğŸ”„ ç½‘ç»œä¸ä½³æ—¶è‡ªåŠ¨å›é€€åˆ°ä¸­ç»§æ¨¡å¼

**Planned Modules:**
```
gpuf-c/src/p2p/
â”œâ”€â”€ mod.rs              # P2P module entry
â”œâ”€â”€ peer.rs             # Peer connection management
â”œâ”€â”€ nat_traversal.rs    # NAT Traversal
â”œâ”€â”€ connection.rs       # P2P Connection
â””â”€â”€ discovery.rs        # Node Discovery

gpuf-s/src/signaling/
â”œâ”€â”€ mod.rs              # Signaling Server
â””â”€â”€ peer_registry.rs    # Peer Address Registry
```

#### XDP å¢å¼ºåŠŸèƒ½
- **åŠ¨æ€è§„åˆ™æ›´æ–°**ï¼šçƒ­æ›´æ–° XDP è§„åˆ™ï¼Œæ— éœ€é‡å¯æœåŠ¡
- **é€Ÿç‡é™åˆ¶**ï¼šå†…æ ¸çº§æŒ‰ IP è¿›è¡Œé™é€Ÿ
- **GeoIP è¿‡æ»¤**ï¼šåŸºäºåœ°ç†ä½ç½®çš„è®¿é—®æ§åˆ¶
- **DDoS é˜²æŠ¤**ï¼šé˜²å¾¡ SYN æ´ªæ³›ä¸è¿æ¥æ´ªæ³›æ”»å‡»

### ğŸ“‹ æœªæ¥å¢å¼º
- [ ] æµè§ˆå™¨å®¢æˆ·ç«¯çš„ WebSocket æ”¯æŒ
- [ ] å¤šåŒºåŸŸéƒ¨ç½²ä¸åœ°ç†è·¯ç”±
- [ ] æŒ‡æ ‡å¢å¼ºå¹¶é›†æˆ Prometheus/Grafana
- [ ] æ”¯æŒ HTTP/3ï¼ˆQUICï¼‰åè®®
- [ ] é«˜çº§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆæœ€å°‘è¿æ¥ã€åŠ æƒè½®è¯¢ï¼‰
- [ ] å®¢æˆ·ç«¯ä¾§è´Ÿè½½é¢„æµ‹ä¸æ™ºèƒ½è·¯ç”±
- [ ] ä½¿ç”¨ OpenTelemetry çš„åˆ†å¸ƒå¼è¿½è¸ª

### ğŸ”¬ ç ”ç©¶ä¸æ¢ç´¢
- åŸºäºåŒºå—é“¾çš„å»ä¸­å¿ƒåŒ–è®¤è¯
- é›¶çŸ¥è¯†è¯æ˜çš„éšç§ä¿æŠ¤è®¤è¯
- åŸºäº FPGA çš„æŠ¥æ–‡å¤„ç†åŠ é€Ÿ
- åŸºäº eBPF çš„æµé‡æ•´å½¢ä¸æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼æ¬¢è¿æäº¤ Pull Requestã€‚

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼ˆ`git checkout -b feature/AmazingFeature`ï¼‰
3. æäº¤æ›´æ”¹ï¼ˆ`git commit -m 'Add some AmazingFeature'`ï¼‰
4. æ¨é€åˆ†æ”¯ï¼ˆ`git push origin feature/AmazingFeature`ï¼‰
5. æäº¤ Pull Request

### å¼€å‘æŒ‡å—

- éµå¾ª Rust æœ€ä½³å®è·µä¸ä»£ç é£æ ¼
- ä¸ºæ–°åŠŸèƒ½è¡¥å……æµ‹è¯•
- æŒ‰éœ€æ›´æ–°æ–‡æ¡£
- æäº¤å‰ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

## ğŸ“Š æ€§èƒ½

- **åå**ï¼šåŸºäº Tokio çš„é«˜æ€§èƒ½å¼‚æ­¥ I/O
- **æ—¶å»¶**ï¼šäºšæ¯«ç§’çº§è·¯ç”±è°ƒåº¦
- **æ‰©å±•æ€§**ï¼šæ”¯æŒæµ·é‡å®¢æˆ·ç«¯è¿æ¥
- **ç¼“å­˜**ï¼šRedis ç¼“å­˜å¯é™ä½çº¦ 90% çš„æ•°æ®åº“è´Ÿè½½
- **æ‰¹å¤„ç†**ï¼šå¯é…ç½®æ‰¹é‡å¿ƒè·³å¤„ç†ï¼Œæ•ˆç‡æ›´é«˜

## ğŸ”’ å®‰å…¨

- TLS 1.3 åŠ å¯†ç¡®ä¿ä¼ è¾“å®‰å…¨
- åŸºäºæ•°æ®åº“çš„è®¤è¯ä¸ Token æ ¡éªŒ
- Redis ç¼“å­˜æå‡æ€§èƒ½ä¸”ä¸é™ä½å®‰å…¨æ€§
- è¾“å…¥æ ¡éªŒä¸ SQL æ³¨å…¥é˜²æŠ¤
- è¯ä¹¦å®‰å…¨ç®¡ç†

## ğŸŒŸ ä½¿ç”¨åœºæ™¯

- **AI æ¨¡å‹æœåŠ¡**ï¼šå°†è¯·æ±‚è·¯ç”±åˆ°åˆ†å¸ƒå¼æ¨ç†å¼•æ“
- **æœåŠ¡æš´éœ²**ï¼šå®‰å…¨åœ°å°†æœ¬åœ°æœåŠ¡æš´éœ²åˆ°å…¬ç½‘
- **è´Ÿè½½å‡è¡¡**ï¼šåœ¨å¤šä¸ªåç«¯å®ä¾‹é—´åˆ†å‘æµé‡
- **ç›‘æ§å‘Šè­¦**ï¼šå®æ—¶ç›‘æ§ç³»ç»Ÿä¸åº”ç”¨
- **å¼€å‘è”è°ƒ**ï¼šéšæ—¶éšåœ°è®¿é—®æœ¬åœ°å¼€å‘ç¯å¢ƒ

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº BSD 3-Clause è®¸å¯è¯ï¼Œè¯¦æƒ…è§ [LICENSE](LICENSE)ã€‚


## ğŸ“® æ”¯æŒ

- ğŸ“– [æ–‡æ¡£ç´¢å¼•](./)
- ğŸ› [é—®é¢˜è¿½è¸ª](https://github.com/nexus-gpu/GPUFabric/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/nexus-gpu/GPUFabric/discussions)

---

ç”¨ â¤ï¸ å’Œ Rust æ‰“é€ 
